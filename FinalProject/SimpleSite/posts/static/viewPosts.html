<!DOCTYPE html>
<html>
    <head>
       <title>View All Posts Form</title>
    </head>
    <body>
        <h1>View All Posts</h1>
        <form id="viewPostsForm">
            <label for="userID">userID:</label>
            <br>
            <input type="text" id="userID" name="userID" required>
            <br><br>
            <button type="submit">View All Posts</button>
        </form>
        <br><br>
        
        <div id="posts-container"></div>

    </body>
    <script>
        document.getElementById('viewPostsForm').addEventListener('submit', async (event) => {
            event.preventDefault();
            
            const userID = document.getElementById('userID').value;
            
            if (!userID) {
                alert('userID is empty');
                return;
            }
            
            const response = await fetch(`https://n5ztmyxhrj.execute-api.us-east-1.amazonaws.com/prod/viewPosts?userID=${userID}`, {method: 'GET'});
            const data = await response.json();
            console.log(data);

            // Clear any existing posts
            const postsContainer = document.getElementById('posts-container');
            postsContainer.innerHTML = '';

            if (data.count == 0) {
                userButtonsContainer.innerHTML = 'No Posts today!';
                return;
            }

            // Add posts
            data.posts.forEach(post => {
                // Create a container for each post
                const postContainer = document.createElement('div');
                postContainer.style.marginBottom = '10px'; // Add some spacing

                // Create title for post
                const postTitle = document.createElement('span');
                postTitle.textContent = `${post.title}: `;

                // add username that wrote that post
                const postWriter = document.createElement('span');
                postWriter.textContent = `${post.username}`;

                // Create body for post
                const postBody = document.createElement('span');
                postBody.textContent = `${post.body}`;


                // Append text and button to the user container
                postContainer.appendChild(postTitle);
                postContainer.appendChild(postWriter);
                postContainer.appendChild(postBody);

                // Append the user container to the main container
                postsContainer.appendChild(postContainer);
            });
        });
    </script>
</html>