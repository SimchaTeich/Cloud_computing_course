<!DOCTYPE html>
<html>
    <head>
       <title>Example register form</title>
    </head>
    <body>
        <h1>Register</h1>
        <form id="registerForm">
            <label for="username">Username:</label>
            <br>
            <input type="text" id="username" name="username" placeholder="username" required>
            <br><br>
            <label for="email">Email:</label>
            <br>
            <input type="email" id="email" name="email" placeholder="username@gmail.com" required>
            <br><br>
            <label for="password">Password:</label>
            <br>
            <input type="password" id="password" name="password" required>
            <br><br>
            <button type="submit">submit</button>
        </form>
        <!--
        <form action="https://xueq1x49q1.execute-api.us-east-1.amazonaws.com/prod/register" method="post">    
        </form>
        -->
    </body>
    <script>
        document.getElementById('registerForm').addEventListener('submit', async (event) => {
            event.preventDefault();
            
            const username = document.getElementById('username').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            if (!username || !email || !password) {
                alert('The registration form is incomplete');
                return;
            }
            
            const response = await fetch(`https://xueq1x49q1.execute-api.us-east-1.amazonaws.com/prod/register`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    username: username,
                    email: email,
                    password: password
                })
            });
            const data = await response.json();
            alert(JSON.stringify(data));
            // if (!response.ok) {
            //     alert('Failed to get pre-signed URL: ' + data.msg);
            //     return;
            // }
            
            // const preSignedUrl = data.url; 
            // console.log(preSignedUrl);

            // // Step 2: Upload the file using the pre-signed URL
            // const uploadResponse = await fetch(preSignedUrl, {
            //     method: 'PUT',
            //     body: file
            // });
            
            // if (!uploadResponse.ok) {
            //     alert('Failed to upload the file.');
            //     return;
            // }
            
            // alert('File uploaded successfully!');
        });
    </script>
</html>